pool:
  vmImage: "Ubuntu 16.04"

variables:
  imageName: "$(serviceName):$(build.buildId)"

steps:
  - script: docker build -t $(imageName) ./$(serviceName)
    displayName: "Build service image: $(serviceName)"
  - script: |
      docker login -u $(dockerId) -p $(pswd) $(dockerId).azurecr.io
      docker push $(dockerId).azurecr.io/$(imageName)
    displayName: "Push image"
